<div v-stick-in-parent>

    <h1 class="h2 title">
        <span>
            ${ currentVariation | itemName }
        </span>
    </h1>

    {% if ('item.shortDescription' in itemData or 'all' in itemData)%}
        <p class="single-description" v-if="currentVariation.texts.shortDescription !== ''" v-html="currentVariation.texts.shortDescription"></p>
    {% endif %}

    <hr class="hr-before-variation">

    <!-- Variation -->
    <div class="prod-row-with-title" v-if="variations.length > 0">
        <variation-select template="#vue-variation-select" :attributes="attributeNameMap" :variation-units="variationUnits" :variations="variations" :preselect="currentVariation.variation.id" :unitPreselect="currentVariation.variation.unitCombinationId" @is-valid-change="isVariationSelected = $event"></variation-select>
    </div>
    <!-- /Variation -->

    <!-- Item Bundle -->
    <item-bundle :bundle-type="currentVariation.variation.bundleType" :bundle-components="currentVariation.bundleComponents"></item-bundle>
    <!-- /Item Bundle -->

    <slot name="BeforePrice"></slot>

    <div class="row" v-if="currentVariation.filter.isSalable && variationGroupedProperties.length">
        <order-property-list></order-property-list>
    </div>

    <div class="row flex-wrap align-items-center prod-row-with-title">
        <div class="col-4 col-md-4 col-lg-3 prod-row-title">Preis</div>
        <div class="col-8 col-md-8 col-lg-9">
            <graduated-prices template="#vue-graduated-prices"></graduated-prices>

            {% if ('item.recommendedPrice' in itemData or 'all' in itemData) %}
                <div class="crossprice" v-if="currentVariation.prices.rrp && currentVariation.prices.rrp.unitPrice.value > 0 && currentVariation.prices.rrp.unitPrice.value > currentVariation.prices.default.unitPrice.value">
                    <del class="text-muted small">
                        ${ currentVariation.prices.rrp.unitPrice.formatted }
                    </del>
                </div>
            {% endif %}

            <span class="price">
                <span ref="variationTotalPrice" :content="currentVariation.prices.default.price.value">
                    ${ variationTotalPrice | currency(currentVariation.prices.default.currency) }
                </span>
                <sup>*</sup>
                <span :content="currentVariation.prices.default.currency"></span>
            </span>

            <div class="base-price text-muted my-3">
                <div>
                    {{ trans("Dekoundgarten::Template.singleStockNetBefore") }}
                    <span>${ currentVariation.stock.net }</span>
                    {{ trans("Dekoundgarten::Template.singleStockNetAfter") }}
                </div>
                <div v-if="currentVariation.variation.mayShowUnitPrice">
                    {{ trans("Ceres::Template.singleItemUnitPrice") }}
                    <span class="base-price-value">
                        ${ variationGraduatedPrice.basePrice | specialOffer(currentVariation.prices, "basePrice") }
                    </span>
                </div>
            </div>
        </div>
    </div>

    <slot name="AfterPrice"></slot>

    <div class="row my-3">
        <div class="col-12">
            <div class="w-100">
                <slot name="BeforeAddToBasket"></slot>
            </div>

            <div class="w-100">
                <add-to-basket
                    template="#vue-add-to-basket"
                    :variation-id="currentVariation.variation.id"
                    :is-salable="!!currentVariation.filter && currentVariation.filter.isSalable"
                    :has-children="!!currentVariation.filter && currentVariation.filter.hasActiveChildren"
                    :interval-quantity="currentVariation.variation.intervalOrderQuantity || 1"
                    :minimum-quantity="currentVariation.variation.minimumOrderQuantity"
                    :maximum-quantity="!!currentVariation.variation.maximumOrderQuantity && currentVariation.variation.maximumOrderQuantity > 0 ? currentVariation.variation.maximumOrderQuantity : null"
                    :order-properties="currentVariation.properties"
                    :use-large-scale="false"
                    :show-quantity="true"
                    :item-url="currentVariation | itemURL"
                    :missing-order-properties="variationMissingProperties"
                    :is-variation-selected="isVariationSelected && currentVariation.filter.isSalable">
                        {% if "wish-list" in enabledRoutes or "all" in enabledRoutes %}
                            <div class="col-12 col-sm-6 col-md-12 col-lg-6">
                                <add-to-wish-list template="#vue-add-to-wish-list" :variation-id="currentVariation.variation.id"></add-to-wish-list>
                            </div>
                        {% endif %}
                </add-to-basket>
            </div>

            <div class="w-100">
                <slot name="AfterAddToBasket"></slot>
            </div>
        </div>
    </div>

    <slot name="AdditionalContentAfterAddToBasket"></slot>

    <hr>

    <div class="row">
        <div class="col-md-12 col-lg-6 order-lg-2 text-lg-right">
            <span class="articlenumber">
                {{ trans("Ceres::Template.singleItemNumber") }}
                <span>${ currentVariation.variation.number }</span>
            </span>
        </div>
        <div class="col-md-12 col-lg-6 order-lg-1">
            <span class="vat">
                * {% if services.customer.showNetPrices() %}{{ trans("Ceres::Template.singleItemExclVAT") }}{% else %}{{ trans("Ceres::Template.singleItemInclVAT") }}{% endif %} {{ trans("Ceres::Template.singleItemExclusive") }}
                <a href="/versandkosten/" title="{{ trans("Ceres::Template.singleItemShippingCosts") }}">{{ trans("Ceres::Template.singleItemShippingCosts") }}</a>
            </span>
        </div>
    </div>
    <div class="prod-actions-footer-text1">
        <b>Kostenlose Lieferung ab 20 €</b><br>
        <span v-if="currentVariation.variation.availability" :class="'availability_' + currentVariation.variation.availability.id">
            <span>
                ${ currentVariation.variation.availability.names.name }
            </span>
        </span>
    </div>
    <div class="row prod-actions-footer-text2">
        <div class="col-4">
            <i class="fa fa-truck" aria-hidden="true"></i>
            <span>Kostenloser<br>Rückversand</span>
        </div>
        <div class="col-4">
            <i class="fa fa-undo" aria-hidden="true"></i>
            <span>30 Tage<br>Rückgaberecht</span>
        </div>
        <div class="col-4">
            <i class="fa fa-headphones" aria-hidden="true"></i>
            <span>Kostenlose<br>Beratung</span>
        </div>
    </div>

    <slot name="AdditionalContentAfterVAT"></slot>

</div>